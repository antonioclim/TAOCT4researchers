<?xml version="1.0" encoding="UTF-8"?>
<!--
═══════════════════════════════════════════════════════════════════════════════
COMPUTATIONAL THINKING FOR RESEARCHERS
Week 3: Algorithmic Complexity
Diagram: Memory Hierarchy with Access Latencies
═══════════════════════════════════════════════════════════════════════════════

This SVG visualises the computer memory hierarchy pyramid showing the trade-off
between speed, capacity and cost at each level from CPU registers to storage.

© 2025 Antonio Clim. All rights reserved.
See README.md for full licence terms.
═══════════════════════════════════════════════════════════════════════════════
-->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700" width="900" height="700">
  <defs>
    <!-- Gradient backgrounds for hierarchy levels -->
    <linearGradient id="registersGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ee5a5a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="l1Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffa06b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ee8f5a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="l2Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffd56b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#eec45a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="l3Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9be36b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8ad25a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ramGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6bc9ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5ab8ee;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ssdGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#a06bff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8f5aee;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hddGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#666688;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#555577;stop-opacity:1" />
    </linearGradient>
    
    <!-- Background gradient -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="700" fill="url(#bgGrad)"/>
  
  <!-- Title -->
  <text x="450" y="40" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="24" font-weight="bold" text-anchor="middle">
    Memory Hierarchy: Speed vs Capacity Trade-off
  </text>
  <text x="450" y="65" fill="#aaaacc" font-family="Segoe UI, Arial, sans-serif" 
        font-size="14" text-anchor="middle">
    Access latency increases and cost per byte decreases as we move down the pyramid
  </text>
  
  <!-- Pyramid structure (centred at x=350) -->
  <!-- Level 0: CPU Registers -->
  <polygon points="350,100 410,140 290,140" fill="url(#registersGrad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="130" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="11" font-weight="bold" text-anchor="middle">Registers</text>
  
  <!-- Level 1: L1 Cache -->
  <polygon points="290,145 410,145 450,195 250,195" fill="url(#l1Grad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="175" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="12" font-weight="bold" text-anchor="middle">L1 Cache</text>
  
  <!-- Level 2: L2 Cache -->
  <polygon points="250,200 450,200 500,260 200,260" fill="url(#l2Grad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="238" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="13" font-weight="bold" text-anchor="middle">L2 Cache</text>
  
  <!-- Level 3: L3 Cache -->
  <polygon points="200,265 500,265 560,335 140,335" fill="url(#l3Grad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="308" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="14" font-weight="bold" text-anchor="middle">L3 Cache (Shared)</text>
  
  <!-- Level 4: Main Memory (RAM) -->
  <polygon points="140,340 560,340 630,430 70,430" fill="url(#ramGrad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="390" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="15" font-weight="bold" text-anchor="middle">Main Memory (RAM)</text>
  
  <!-- Level 5: SSD Storage -->
  <polygon points="70,435 630,435 700,520 0,520" fill="url(#ssdGrad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="485" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="16" font-weight="bold" text-anchor="middle">SSD Storage</text>
  
  <!-- Level 6: HDD/Network Storage -->
  <polygon points="0,525 700,525 700,600 0,600" fill="url(#hddGrad)" 
           stroke="#ffffff" stroke-width="2" filter="url(#shadow)"/>
  <text x="350" y="570" fill="#ffffff" font-family="Segoe UI, Arial, sans-serif" 
        font-size="16" font-weight="bold" text-anchor="middle">HDD / Network Storage</text>
  
  <!-- Right side: Latency annotations -->
  <g font-family="Courier New, monospace" font-size="11" fill="#ffffff">
    <!-- Latency column header -->
    <text x="720" y="100" fill="#ffcc66" font-size="13" font-weight="bold">Latency</text>
    
    <!-- Registers -->
    <line x1="420" y1="120" x2="700" y2="120" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="720" y="125" fill="#ff6b6b">~0.3 ns</text>
    <text x="820" y="125" fill="#888899" font-size="10">(1 cycle)</text>
    
    <!-- L1 -->
    <line x1="460" y1="170" x2="700" y2="170" stroke="#ffa06b" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="720" y="175" fill="#ffa06b">~1 ns</text>
    <text x="820" y="175" fill="#888899" font-size="10">(4 cycles)</text>
    
    <!-- L2 -->
    <line x1="510" y1="230" x2="700" y2="230" stroke="#ffd56b" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="720" y="235" fill="#ffd56b">~4 ns</text>
    <text x="820" y="235" fill="#888899" font-size="10">(12 cycles)</text>
    
    <!-- L3 -->
    <line x1="570" y1="300" x2="700" y2="300" stroke="#9be36b" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="720" y="305" fill="#9be36b">~12 ns</text>
    <text x="820" y="305" fill="#888899" font-size="10">(40 cycles)</text>
    
    <!-- RAM -->
    <line x1="640" y1="385" x2="700" y2="385" stroke="#6bc9ff" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="720" y="390" fill="#6bc9ff">~100 ns</text>
    <text x="820" y="390" fill="#888899" font-size="10">(~300 cycles)</text>
    
    <!-- SSD -->
    <line x1="705" y1="478" x2="700" y2="478" stroke="#a06bff" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="720" y="483" fill="#a06bff">~100 µs</text>
    <text x="820" y="483" fill="#888899" font-size="10">(random)</text>
    
    <!-- HDD -->
    <text x="720" y="570" fill="#999999">~10 ms</text>
    <text x="820" y="570" fill="#888899" font-size="10">(seek time)</text>
  </g>
  
  <!-- Left side: Capacity annotations -->
  <g font-family="Courier New, monospace" font-size="11" fill="#ffffff" text-anchor="end">
    <!-- Capacity column header -->
    <text x="180" y="100" fill="#66ccff" font-size="13" font-weight="bold" text-anchor="end">Capacity</text>
    
    <!-- Registers -->
    <text x="180" y="125" fill="#ff6b6b">~1 KB</text>
    
    <!-- L1 -->
    <text x="180" y="175" fill="#ffa06b">32-64 KB</text>
    
    <!-- L2 -->
    <text x="180" y="235" fill="#ffd56b">256 KB - 1 MB</text>
    
    <!-- L3 -->
    <text x="180" y="305" fill="#9be36b">4-64 MB</text>
    
    <!-- RAM -->
    <text x="180" y="390" fill="#6bc9ff">8-128 GB</text>
    
    <!-- SSD -->
    <text x="180" y="483" fill="#a06bff">256 GB - 8 TB</text>
    
    <!-- HDD -->
    <text x="180" y="570" fill="#999999">1-20 TB</text>
  </g>
  
  <!-- Speed/Capacity arrows -->
  <!-- Speed arrow (decreasing downward) -->
  <line x1="780" y1="130" x2="780" y2="560" stroke="#ff6666" stroke-width="2" 
        marker-end="url(#arrowhead)"/>
  <text x="780" y="590" fill="#ff6666" font-family="Segoe UI, Arial, sans-serif" 
        font-size="11" text-anchor="middle">SLOWER</text>
  <text x="780" y="120" fill="#66ff66" font-family="Segoe UI, Arial, sans-serif" 
        font-size="11" text-anchor="middle">FASTER</text>
  
  <!-- Capacity arrow (increasing downward) -->
  <line x1="820" y1="560" x2="820" y2="130" stroke="#66ff66" stroke-width="2" 
        marker-end="url(#arrowhead)"/>
  <text x="820" y="120" fill="#66ff66" font-family="Segoe UI, Arial, sans-serif" 
        font-size="11" text-anchor="middle">LARGER</text>
  <text x="820" y="590" fill="#ff6666" font-family="Segoe UI, Arial, sans-serif" 
        font-size="11" text-anchor="middle">SMALLER</text>
  
  <!-- Key insight box -->
  <rect x="30" y="620" width="840" height="60" rx="8" ry="8" 
        fill="#2a2a4a" stroke="#4a4a6a" stroke-width="1"/>
  <text x="450" y="645" fill="#ffcc66" font-family="Segoe UI, Arial, sans-serif" 
        font-size="13" font-weight="bold" text-anchor="middle">
    Key Insight: Cache-Friendly Algorithms
  </text>
  <text x="450" y="665" fill="#ccccee" font-family="Segoe UI, Arial, sans-serif" 
        font-size="11" text-anchor="middle">
    Sequential memory access exploits cache prefetching (64-byte cache lines). L1 cache miss costs ~100× vs hit.
  </text>
  
  <!-- Bandwidth annotations (small text) -->
  <g font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666688">
    <text x="560" y="205">~500 GB/s</text>
    <text x="595" y="270">~200 GB/s</text>
    <text x="630" y="345">~100 GB/s</text>
    <text x="685" y="440">~50 GB/s</text>
    <text x="750" y="530">~3 GB/s</text>
  </g>
  
  <!-- CPU boundary indicator -->
  <rect x="130" y="90" width="440" height="260" rx="10" ry="10" 
        fill="none" stroke="#ff6666" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="580" y="355" fill="#ff6666" font-family="Segoe UI, Arial, sans-serif" 
        font-size="10" text-anchor="start">← CPU Die</text>
</svg>
