@startuml ode_solver_hierarchy
!theme plain
skinparam backgroundColor #1a1a2e
skinparam defaultFontColor #e0e0e0
skinparam classBackgroundColor #16213e
skinparam classBorderColor #58a6ff

title ODE Solver Hierarchy: Accuracy vs Computational Cost

abstract class ODESolver {
  {abstract} +step(t, y, h): NDArray
  +solve(f, y0, t_span, h): Solution
  --
  Template Method Pattern
}

class EulerSolver {
  +step(t, y, h): NDArray
  --
  Order: 1
  Local Error: O(h²)
  Global Error: O(h)
  Evaluations/step: 1
}

class MidpointSolver {
  +step(t, y, h): NDArray
  --
  Order: 2
  Local Error: O(h³)
  Global Error: O(h²)
  Evaluations/step: 2
}

class RK4Solver {
  +step(t, y, h): NDArray
  --
  Order: 4
  Local Error: O(h⁵)
  Global Error: O(h⁴)
  Evaluations/step: 4
}

class AdaptiveRK45 {
  -tolerance: float
  -min_step: float
  -max_step: float
  +step(t, y, h): tuple[NDArray, float]
  --
  Order: 4/5 embedded
  Error: adaptive
  Step size: variable
}

ODESolver <|-- EulerSolver
ODESolver <|-- MidpointSolver
ODESolver <|-- RK4Solver
ODESolver <|-- AdaptiveRK45

note bottom of EulerSolver
  Simple but unstable
  for stiff problems
end note

note bottom of RK4Solver
  Workhorse method
  Good accuracy/cost ratio
end note

note bottom of AdaptiveRK45
  Automatic step control
  Fehlberg coefficients
end note

@enduml
