<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turing Machine Simulator â€” Week 1 Animation</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e0e0;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #58a6ff;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .subtitle {
            text-align: center;
            color: #8b949e;
            margin-bottom: 30px;
            font-size: 0.9em;
        }
        
        /* Tape visualisation */
        .tape-container {
            background: #0d1117;
            border: 2px solid #30363d;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .tape-label {
            text-align: center;
            color: #58a6ff;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .tape {
            display: flex;
            justify-content: center;
            gap: 2px;
            margin-bottom: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }
        
        .cell {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid #30363d;
            background: linear-gradient(180deg, #21262d 0%, #161b22 100%);
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .cell.current {
            background: linear-gradient(180deg, #ffd700 0%, #ffb700 100%);
            border-color: #ffa500;
            color: #000;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        
        .cell.blank {
            color: #666;
        }
        
        .head-indicator {
            text-align: center;
            font-size: 24px;
            color: #e74c3c;
            margin-bottom: 10px;
            animation: bounce 0.5s ease infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* Control panel */
        .control-panel {
            background: #0d1117;
            border: 2px solid #30363d;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .state-display {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .state-box {
            text-align: center;
            padding: 15px 25px;
            background: #161b22;
            border-radius: 8px;
            border: 1px solid #30363d;
        }
        
        .state-box label {
            display: block;
            color: #8b949e;
            font-size: 0.85em;
            margin-bottom: 5px;
        }
        
        .state-box .value {
            font-family: 'Courier New', monospace;
            font-size: 1.5em;
            font-weight: bold;
            color: #58a6ff;
        }
        
        .state-box .value.state-name {
            color: #3fb950;
        }
        
        .state-box .value.step-count {
            color: #f0883e;
        }
        
        /* Buttons */
        .button-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-primary {
            background: linear-gradient(180deg, #238636 0%, #1a7f37 100%);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(180deg, #2ea043 0%, #238636 100%);
        }
        
        .btn-secondary {
            background: linear-gradient(180deg, #21262d 0%, #161b22 100%);
            color: #e0e0e0;
            border: 1px solid #30363d;
        }
        
        .btn-secondary:hover:not(:disabled) {
            background: linear-gradient(180deg, #30363d 0%, #21262d 100%);
        }
        
        .btn-danger {
            background: linear-gradient(180deg, #da3633 0%, #b62324 100%);
            color: white;
        }
        
        /* Transition log */
        .log-container {
            background: #0d1117;
            border: 2px solid #30363d;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .log-container h3 {
            color: #58a6ff;
            margin-bottom: 15px;
        }
        
        .log {
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .log-entry {
            padding: 5px 10px;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        
        .log-entry:nth-child(even) {
            background: #161b22;
        }
        
        .log-entry .step-num {
            color: #f0883e;
            margin-right: 10px;
        }
        
        .log-entry .transition {
            color: #8b949e;
        }
        
        .log-entry .action {
            color: #3fb950;
        }
        
        /* Machine selector */
        .machine-selector {
            margin-bottom: 20px;
        }
        
        .machine-selector label {
            color: #8b949e;
            margin-right: 10px;
        }
        
        .machine-selector select {
            padding: 10px 15px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #30363d;
            background: #161b22;
            color: #e0e0e0;
            cursor: pointer;
        }
        
        .machine-selector input {
            padding: 10px 15px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #30363d;
            background: #161b22;
            color: #e0e0e0;
            width: 150px;
            margin-left: 20px;
            font-family: 'Courier New', monospace;
        }
        
        /* Status messages */
        .status {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: bold;
        }
        
        .status.running {
            background: rgba(56, 139, 253, 0.15);
            border: 1px solid #388bfd;
            color: #58a6ff;
        }
        
        .status.accepted {
            background: rgba(46, 160, 67, 0.15);
            border: 1px solid #238636;
            color: #3fb950;
        }
        
        .status.rejected {
            background: rgba(218, 54, 51, 0.15);
            border: 1px solid #da3633;
            color: #f85149;
        }
        
        /* Footer */
        footer {
            text-align: center;
            color: #8b949e;
            font-size: 0.8em;
            margin-top: 30px;
        }
        
        footer a {
            color: #58a6ff;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¥ï¸ Turing Machine Simulator</h1>
        <p class="subtitle">Week 1: The Epistemology of Computation â€” Interactive Animation</p>
        
        <!-- Machine Selection -->
        <div class="control-panel">
            <div class="machine-selector">
                <label for="machine">Select Machine:</label>
                <select id="machine" onchange="selectMachine()">
                    <option value="increment">Unary Increment</option>
                    <option value="palindrome">Palindrome Checker</option>
                    <option value="addition">Unary Addition</option>
                </select>
                
                <label for="input-string" style="margin-left: 20px;">Input:</label>
                <input type="text" id="input-string" value="111" placeholder="e.g., 111">
            </div>
        </div>
        
        <!-- Tape Visualisation -->
        <div class="tape-container">
            <div class="tape-label">Infinite Tape</div>
            <div class="head-indicator">â–¼</div>
            <div class="tape" id="tape">
                <!-- Cells generated by JavaScript -->
            </div>
        </div>
        
        <!-- State Display -->
        <div class="control-panel">
            <div class="state-display">
                <div class="state-box">
                    <label>Current State</label>
                    <div class="value state-name" id="current-state">qâ‚€</div>
                </div>
                <div class="state-box">
                    <label>Symbol Read</label>
                    <div class="value" id="current-symbol">â€”</div>
                </div>
                <div class="state-box">
                    <label>Step Count</label>
                    <div class="value step-count" id="step-count">0</div>
                </div>
                <div class="state-box">
                    <label>Speed (ms)</label>
                    <div class="value">
                        <input type="range" id="speed" min="100" max="1000" value="500" 
                               style="width: 100px;">
                    </div>
                </div>
            </div>
            
            <div class="button-row">
                <button class="btn-primary" id="btn-step" onclick="step()">
                    â¯ï¸ Step
                </button>
                <button class="btn-primary" id="btn-run" onclick="run()">
                    â–¶ï¸ Run
                </button>
                <button class="btn-secondary" id="btn-pause" onclick="pause()" disabled>
                    â¸ï¸ Pause
                </button>
                <button class="btn-danger" onclick="reset()">
                    ğŸ”„ Reset
                </button>
            </div>
            
            <div id="status" class="status running" style="display: none;"></div>
        </div>
        
        <!-- Transition Log -->
        <div class="log-container">
            <h3>ğŸ“œ Execution Log</h3>
            <div class="log" id="log">
                <div class="log-entry">
                    <span class="transition">Ready. Click 'Step' or 'Run' to begin.</span>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Â© 2025 Antonio Clim â€” THE ART OF COMPUTATIONAL THINKING FOR RESEARCHERS</p>
            <p>Week 1: The Epistemology of Computation</p>
        </footer>
    </div>
    
    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TURING MACHINE DEFINITIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const BLANK = 'â–¡';
        
        const machines = {
            increment: {
                name: 'Unary Increment',
                description: 'Adds one to a unary number (e.g., 111 â†’ 1111)',
                defaultInput: '111',
                initialState: 'q0',
                acceptState: 'accept',
                rejectState: 'reject',
                transitions: {
                    'q0,1': { nextState: 'q0', write: '1', direction: 'R' },
                    'q0,â–¡': { nextState: 'accept', write: '1', direction: 'S' }
                }
            },
            palindrome: {
                name: 'Palindrome Checker',
                description: 'Checks if a binary string is a palindrome',
                defaultInput: '10101',
                initialState: 'q0',
                acceptState: 'accept',
                rejectState: 'reject',
                transitions: {
                    // Check first symbol
                    'q0,0': { nextState: 'have0', write: 'â–¡', direction: 'R' },
                    'q0,1': { nextState: 'have1', write: 'â–¡', direction: 'R' },
                    'q0,â–¡': { nextState: 'accept', write: 'â–¡', direction: 'S' },
                    
                    // Scan right looking for end (had 0)
                    'have0,0': { nextState: 'have0', write: '0', direction: 'R' },
                    'have0,1': { nextState: 'have0', write: '1', direction: 'R' },
                    'have0,â–¡': { nextState: 'check0', write: 'â–¡', direction: 'L' },
                    
                    // Scan right looking for end (had 1)
                    'have1,0': { nextState: 'have1', write: '0', direction: 'R' },
                    'have1,1': { nextState: 'have1', write: '1', direction: 'R' },
                    'have1,â–¡': { nextState: 'check1', write: 'â–¡', direction: 'L' },
                    
                    // Check last symbol matches first
                    'check0,0': { nextState: 'back', write: 'â–¡', direction: 'L' },
                    'check0,1': { nextState: 'reject', write: '1', direction: 'S' },
                    'check0,â–¡': { nextState: 'accept', write: 'â–¡', direction: 'S' },
                    
                    'check1,0': { nextState: 'reject', write: '0', direction: 'S' },
                    'check1,1': { nextState: 'back', write: 'â–¡', direction: 'L' },
                    'check1,â–¡': { nextState: 'accept', write: 'â–¡', direction: 'S' },
                    
                    // Go back to start
                    'back,0': { nextState: 'back', write: '0', direction: 'L' },
                    'back,1': { nextState: 'back', write: '1', direction: 'L' },
                    'back,â–¡': { nextState: 'q0', write: 'â–¡', direction: 'R' }
                }
            },
            addition: {
                name: 'Unary Addition',
                description: 'Adds two unary numbers separated by + (e.g., 11+111 â†’ 11111)',
                defaultInput: '11+111',
                initialState: 'q0',
                acceptState: 'accept',
                rejectState: 'reject',
                transitions: {
                    // Scan to find +
                    'q0,1': { nextState: 'q0', write: '1', direction: 'R' },
                    'q0,+': { nextState: 'found', write: '1', direction: 'R' },
                    'q0,â–¡': { nextState: 'accept', write: 'â–¡', direction: 'S' },
                    
                    // Found +, remove trailing 1
                    'found,1': { nextState: 'found', write: '1', direction: 'R' },
                    'found,â–¡': { nextState: 'erase', write: 'â–¡', direction: 'L' },
                    
                    // Erase the extra 1
                    'erase,1': { nextState: 'accept', write: 'â–¡', direction: 'S' }
                }
            }
        };
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SIMULATOR STATE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let currentMachine = machines.increment;
        let tape = {};
        let headPosition = 0;
        let currentState = 'q0';
        let stepCount = 0;
        let isRunning = false;
        let intervalId = null;
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // VISUALISATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function renderTape() {
            const tapeDiv = document.getElementById('tape');
            tapeDiv.innerHTML = '';
            
            // Show 15 cells centred on head
            const start = headPosition - 7;
            const end = headPosition + 7;
            
            for (let i = start; i <= end; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                if (i === headPosition) {
                    cell.classList.add('current');
                }
                
                const symbol = tape[i] || BLANK;
                cell.textContent = symbol;
                if (symbol === BLANK) {
                    cell.classList.add('blank');
                }
                
                tapeDiv.appendChild(cell);
            }
        }
        
        function updateDisplay() {
            document.getElementById('current-state').textContent = formatState(currentState);
            document.getElementById('current-symbol').textContent = tape[headPosition] || BLANK;
            document.getElementById('step-count').textContent = stepCount;
            renderTape();
        }
        
        function formatState(state) {
            return state.replace(/(\d+)/g, (match) => {
                const subscripts = 'â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰';
                return [...match].map(d => subscripts[parseInt(d)]).join('');
            });
        }
        
        function addLogEntry(message, type = 'info') {
            const log = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = message;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }
        
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            status.style.display = 'block';
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MACHINE CONTROL
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function selectMachine() {
            const select = document.getElementById('machine');
            currentMachine = machines[select.value];
            document.getElementById('input-string').value = currentMachine.defaultInput;
            reset();
        }
        
        function reset() {
            pause();
            
            const inputString = document.getElementById('input-string').value || '';
            
            // Initialise tape
            tape = {};
            for (let i = 0; i < inputString.length; i++) {
                tape[i] = inputString[i];
            }
            
            headPosition = 0;
            currentState = currentMachine.initialState;
            stepCount = 0;
            
            // Clear log
            document.getElementById('log').innerHTML = `
                <div class="log-entry">
                    <span class="transition">Machine: ${currentMachine.name}</span>
                </div>
                <div class="log-entry">
                    <span class="transition">Input: "${inputString || '(empty)'}"</span>
                </div>
                <div class="log-entry">
                    <span class="transition">Ready. Click 'Step' or 'Run' to begin.</span>
                </div>
            `;
            
            document.getElementById('status').style.display = 'none';
            document.getElementById('btn-step').disabled = false;
            document.getElementById('btn-run').disabled = false;
            
            updateDisplay();
        }
        
        function step() {
            if (currentState === currentMachine.acceptState || 
                currentState === currentMachine.rejectState) {
                return false;
            }
            
            const symbol = tape[headPosition] || BLANK;
            const key = `${currentState},${symbol}`;
            const transition = currentMachine.transitions[key];
            
            if (!transition) {
                // No transition defined â€” reject
                currentState = currentMachine.rejectState;
                addLogEntry(`
                    <span class="step-num">Step ${stepCount}:</span>
                    <span class="transition">No transition for (${formatState(currentState)}, ${symbol})</span>
                    <span class="action"> â†’ REJECT</span>
                `);
                showStatus('âŒ REJECTED â€” No valid transition', 'rejected');
                document.getElementById('btn-step').disabled = true;
                document.getElementById('btn-run').disabled = true;
                updateDisplay();
                return false;
            }
            
            // Log the transition
            const dirSymbol = transition.direction === 'L' ? 'â†' : 
                             transition.direction === 'R' ? 'â†’' : 'â€¢';
            addLogEntry(`
                <span class="step-num">Step ${stepCount}:</span>
                <span class="transition">Î´(${formatState(currentState)}, ${symbol}) = </span>
                <span class="action">(${formatState(transition.nextState)}, ${transition.write}, ${dirSymbol})</span>
            `);
            
            // Apply transition
            tape[headPosition] = transition.write;
            currentState = transition.nextState;
            
            if (transition.direction === 'L') {
                headPosition--;
            } else if (transition.direction === 'R') {
                headPosition++;
            }
            
            stepCount++;
            
            // Check for halt
            if (currentState === currentMachine.acceptState) {
                showStatus('âœ… ACCEPTED â€” Machine halted in accept state', 'accepted');
                document.getElementById('btn-step').disabled = true;
                document.getElementById('btn-run').disabled = true;
                addLogEntry(`<span class="action">Machine ACCEPTED after ${stepCount} steps</span>`);
            } else if (currentState === currentMachine.rejectState) {
                showStatus('âŒ REJECTED â€” Machine halted in reject state', 'rejected');
                document.getElementById('btn-step').disabled = true;
                document.getElementById('btn-run').disabled = true;
                addLogEntry(`<span class="action">Machine REJECTED after ${stepCount} steps</span>`);
            }
            
            updateDisplay();
            return currentState !== currentMachine.acceptState && 
                   currentState !== currentMachine.rejectState;
        }
        
        function run() {
            if (isRunning) return;
            
            isRunning = true;
            document.getElementById('btn-step').disabled = true;
            document.getElementById('btn-run').disabled = true;
            document.getElementById('btn-pause').disabled = false;
            showStatus('ğŸ”„ Running...', 'running');
            
            const speed = document.getElementById('speed').value;
            
            intervalId = setInterval(() => {
                if (!step()) {
                    pause();
                }
            }, speed);
        }
        
        function pause() {
            isRunning = false;
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
            
            document.getElementById('btn-pause').disabled = true;
            
            if (currentState !== currentMachine.acceptState && 
                currentState !== currentMachine.rejectState) {
                document.getElementById('btn-step').disabled = false;
                document.getElementById('btn-run').disabled = false;
                document.getElementById('status').style.display = 'none';
            }
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INITIALISATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        window.onload = function() {
            reset();
        };
    </script>
</body>
</html>
