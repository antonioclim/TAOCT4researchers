<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12UNIT: API Explorer - Interactive Learning Tool</title>
    <style>
        :root {
            --primary: #1a365d;
            --secondary: #2c5282;
            --accent: #ed8936;
            --success: #48bb78;
            --error: #e53e3e;
            --warning: #ecc94b;
            --bg: #f7fafc;
            --card: #ffffff;
            --text: #2d3748;
            --code-bg: #1a202c;
            --border: #e2e8f0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        header p {
            opacity: 0.9;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            background: var(--card);
            border: 2px solid var(--border);
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .tab:hover {
            background: var(--bg);
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .tab-content {
            display: none;
            background: var(--card);
            border-radius: 0 8px 8px 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        @media (max-width: 900px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
        
        .section {
            margin-bottom: 1.5rem;
        }
        
        .section h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.25rem;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 0.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            margin-bottom: 1rem;
            font-family: inherit;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        textarea {
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            resize: vertical;
        }
        
        button {
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background 0.2s;
        }
        
        button:hover {
            background: var(--secondary);
        }
        
        button.secondary {
            background: var(--bg);
            color: var(--text);
            border: 2px solid var(--border);
        }
        
        button.secondary:hover {
            background: var(--border);
        }
        
        .btn-group {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .method-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85rem;
        }
        
        .method-get { background: #c6f6d5; color: #22543d; }
        .method-post { background: #bee3f8; color: #2a4365; }
        .method-put { background: #feebc8; color: #744210; }
        .method-delete { background: #fed7d7; color: #742a2a; }
        
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85rem;
        }
        
        .status-2xx { background: #c6f6d5; color: #22543d; }
        .status-3xx { background: #bee3f8; color: #2a4365; }
        .status-4xx { background: #feebc8; color: #744210; }
        .status-5xx { background: #fed7d7; color: #742a2a; }
        
        .response-panel {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #4a5568;
        }
        
        .response-header h4 {
            color: #e2e8f0;
        }
        
        pre {
            background: transparent;
            color: #e2e8f0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .json-key { color: #90cdf4; }
        .json-string { color: #68d391; }
        .json-number { color: #f6ad55; }
        .json-boolean { color: #f687b3; }
        .json-null { color: #a0aec0; }
        
        .info-box {
            background: #ebf8ff;
            border: 1px solid #90cdf4;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .info-box h4 {
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        .warning-box {
            background: #fffaf0;
            border: 1px solid #fbd38d;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .example-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .example-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .example-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }
        
        .example-card h5 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .example-card p {
            font-size: 0.9rem;
            color: #718096;
        }
        
        .headers-list {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            background: var(--bg);
            padding: 1rem;
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .header-row {
            display: flex;
            padding: 0.25rem 0;
            border-bottom: 1px solid var(--border);
        }
        
        .header-name {
            color: var(--secondary);
            font-weight: bold;
            min-width: 200px;
        }
        
        .header-value {
            color: var(--text);
        }
        
        .timeline {
            position: relative;
            padding-left: 2rem;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }
        
        .timeline-item {
            position: relative;
            padding-bottom: 1.5rem;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 0.25rem;
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
        }
        
        .timeline-item.success::before { background: var(--success); }
        .timeline-item.error::before { background: var(--error); }
        .timeline-item.pending::before { background: var(--warning); }
        
        .quiz-option {
            display: block;
            padding: 1rem;
            margin: 0.5rem 0;
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quiz-option:hover {
            border-color: var(--secondary);
        }
        
        .quiz-option.selected {
            border-color: var(--primary);
            background: #ebf8ff;
        }
        
        .quiz-option.correct {
            border-color: var(--success);
            background: #c6f6d5;
        }
        
        .quiz-option.incorrect {
            border-color: var(--error);
            background: #fed7d7;
        }
        
        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s;
        }
        
        .score-display {
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 2rem 0;
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            color: #718096;
            border-top: 1px solid var(--border);
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>üåê API Explorer</h1>
        <p>Interactive Learning Tool for Web APIs and Data Acquisition</p>
    </header>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" onclick="showTab('http')">HTTP Basics</div>
            <div class="tab" onclick="showTab('requests')">Request Builder</div>
            <div class="tab" onclick="showTab('status')">Status Codes</div>
            <div class="tab" onclick="showTab('auth')">Authentication</div>
            <div class="tab" onclick="showTab('pagination')">Pagination</div>
            <div class="tab" onclick="showTab('quiz')">Knowledge Check</div>
        </div>
        
        <!-- HTTP Basics Tab -->
        <div id="http" class="tab-content active">
            <h2>HTTP Request-Response Cycle</h2>
            
            <div class="grid">
                <div>
                    <div class="section">
                        <h3>HTTP Methods</h3>
                        <p>HTTP defines several methods indicating the desired action:</p>
                        
                        <div class="example-list">
                            <div class="example-card" onclick="showMethodInfo('GET')">
                                <h5><span class="method-badge method-get">GET</span></h5>
                                <p>Retrieve a resource. Safe and idempotent.</p>
                            </div>
                            <div class="example-card" onclick="showMethodInfo('POST')">
                                <h5><span class="method-badge method-post">POST</span></h5>
                                <p>Create a new resource. Not idempotent.</p>
                            </div>
                            <div class="example-card" onclick="showMethodInfo('PUT')">
                                <h5><span class="method-badge method-put">PUT</span></h5>
                                <p>Replace a resource entirely. Idempotent.</p>
                            </div>
                            <div class="example-card" onclick="showMethodInfo('DELETE')">
                                <h5><span class="method-badge method-delete">DELETE</span></h5>
                                <p>Remove a resource. Idempotent.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-box" id="methodInfo">
                        <h4>Select a method to learn more</h4>
                        <p>Click on any HTTP method card above to see detailed information and examples.</p>
                    </div>
                </div>
                
                <div>
                    <div class="section">
                        <h3>Request Structure</h3>
                        <div class="response-panel">
                            <pre><span class="json-key">GET</span> /api/publications/123 HTTP/1.1
<span class="json-string">Host:</span> api.example.com
<span class="json-string">Accept:</span> application/json
<span class="json-string">Authorization:</span> Bearer eyJhbG...

<span class="json-null">[Request body for POST/PUT]</span></pre>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Response Structure</h3>
                        <div class="response-panel">
                            <pre>HTTP/1.1 <span class="json-number">200</span> OK
<span class="json-string">Content-Type:</span> application/json
<span class="json-string">X-RateLimit-Remaining:</span> 99

{
  <span class="json-key">"id"</span>: <span class="json-number">123</span>,
  <span class="json-key">"title"</span>: <span class="json-string">"Example Publication"</span>,
  <span class="json-key">"year"</span>: <span class="json-number">2024</span>
}</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Request Builder Tab -->
        <div id="requests" class="tab-content">
            <h2>Interactive Request Builder</h2>
            
            <div class="grid">
                <div>
                    <div class="section">
                        <h3>Build Your Request</h3>
                        
                        <label for="reqMethod">Method</label>
                        <select id="reqMethod" onchange="updateRequestPreview()">
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                        </select>
                        
                        <label for="reqUrl">URL</label>
                        <input type="text" id="reqUrl" value="https://httpbin.org/get" onchange="updateRequestPreview()">
                        
                        <label for="reqHeaders">Headers (JSON)</label>
                        <textarea id="reqHeaders" rows="4" onchange="updateRequestPreview()">{
  "Accept": "application/json",
  "User-Agent": "APIExplorer/1.0"
}</textarea>
                        
                        <label for="reqBody">Body (for POST/PUT)</label>
                        <textarea id="reqBody" rows="4" onchange="updateRequestPreview()">{
  "name": "Test Item",
  "value": 42
}</textarea>
                        
                        <div class="btn-group">
                            <button onclick="sendRequest()">Send Request</button>
                            <button class="secondary" onclick="loadExample('simple')">Load Example</button>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="section">
                        <h3>Request Preview</h3>
                        <div class="response-panel">
                            <pre id="requestPreview">Loading...</pre>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Response</h3>
                        <div class="response-panel">
                            <div class="response-header">
                                <h4>Status: <span id="responseStatus" class="status-badge">-</span></h4>
                                <span id="responseTime">-</span>
                            </div>
                            <pre id="responseBody">Click "Send Request" to see the response</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Status Codes Tab -->
        <div id="status" class="tab-content">
            <h2>HTTP Status Codes Reference</h2>
            
            <div class="section">
                <h3>Status Code Categories</h3>
                
                <div class="grid">
                    <div>
                        <h4 style="color: var(--success);">2xx Success</h4>
                        <div class="headers-list">
                            <div class="header-row">
                                <span class="header-name">200 OK</span>
                                <span class="header-value">Standard success response</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">201 Created</span>
                                <span class="header-value">Resource successfully created</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">204 No Content</span>
                                <span class="header-value">Success with no response body</span>
                            </div>
                        </div>
                        
                        <h4 style="color: #4299e1; margin-top: 1rem;">3xx Redirection</h4>
                        <div class="headers-list">
                            <div class="header-row">
                                <span class="header-name">301 Moved Permanently</span>
                                <span class="header-value">Resource permanently relocated</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">304 Not Modified</span>
                                <span class="header-value">Use cached version</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: var(--warning);">4xx Client Error</h4>
                        <div class="headers-list">
                            <div class="header-row">
                                <span class="header-name">400 Bad Request</span>
                                <span class="header-value">Invalid request syntax</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">401 Unauthorised</span>
                                <span class="header-value">Authentication required</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">403 Forbidden</span>
                                <span class="header-value">Permission denied</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">404 Not Found</span>
                                <span class="header-value">Resource does not exist</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">429 Too Many Requests</span>
                                <span class="header-value">Rate limit exceeded</span>
                            </div>
                        </div>
                        
                        <h4 style="color: var(--error); margin-top: 1rem;">5xx Server Error</h4>
                        <div class="headers-list">
                            <div class="header-row">
                                <span class="header-name">500 Internal Server Error</span>
                                <span class="header-value">Server encountered an error</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">502 Bad Gateway</span>
                                <span class="header-value">Upstream server error</span>
                            </div>
                            <div class="header-row">
                                <span class="header-name">503 Service Unavailable</span>
                                <span class="header-value">Server temporarily overloaded</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>Interactive Status Simulator</h3>
                <div class="btn-group">
                    <button onclick="simulateStatus(200)">200 OK</button>
                    <button onclick="simulateStatus(201)">201 Created</button>
                    <button onclick="simulateStatus(400)">400 Bad Request</button>
                    <button onclick="simulateStatus(404)">404 Not Found</button>
                    <button onclick="simulateStatus(429)">429 Rate Limited</button>
                    <button onclick="simulateStatus(500)">500 Server Error</button>
                </div>
                <div class="response-panel" id="statusSimulator">
                    <pre>Click a status code button to see a simulated response</pre>
                </div>
            </div>
        </div>
        
        <!-- Authentication Tab -->
        <div id="auth" class="tab-content">
            <h2>Authentication Mechanisms</h2>
            
            <div class="grid">
                <div>
                    <div class="section">
                        <h3>API Key Authentication</h3>
                        <p>Simple authentication using a secret key.</p>
                        
                        <div class="info-box">
                            <h4>Header Placement (Preferred)</h4>
                            <pre>X-API-Key: your_secret_key_here</pre>
                        </div>
                        
                        <div class="warning-box">
                            <h4>Query Parameter (Less Secure)</h4>
                            <pre>?api_key=your_secret_key_here</pre>
                            <p style="font-size: 0.9rem; margin-top: 0.5rem;">‚ö†Ô∏è Keys in URLs appear in server logs</p>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Bearer Token</h3>
                        <p>Token-based authentication using the Authorization header.</p>
                        <div class="response-panel">
                            <pre><span class="json-string">Authorization:</span> Bearer eyJhbGciOiJIUzI1NiIs...</pre>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="section">
                        <h3>OAuth 2.0 Client Credentials Flow</h3>
                        <div class="timeline">
                            <div class="timeline-item">
                                <strong>1. Request Token</strong>
                                <pre style="font-size: 0.8rem; margin-top: 0.5rem;">POST /oauth/token
grant_type=client_credentials
client_id=XXX
client_secret=YYY</pre>
                            </div>
                            <div class="timeline-item success">
                                <strong>2. Receive Token</strong>
                                <pre style="font-size: 0.8rem; margin-top: 0.5rem;">{
  "access_token": "eyJhbG...",
  "expires_in": 3600
}</pre>
                            </div>
                            <div class="timeline-item success">
                                <strong>3. Use Token in Requests</strong>
                                <pre style="font-size: 0.8rem; margin-top: 0.5rem;">Authorization: Bearer eyJhbG...</pre>
                            </div>
                            <div class="timeline-item pending">
                                <strong>4. Refresh Before Expiry</strong>
                                <p style="font-size: 0.9rem;">Repeat step 1 when token expires</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Pagination Tab -->
        <div id="pagination" class="tab-content">
            <h2>API Pagination Patterns</h2>
            
            <div class="grid">
                <div>
                    <div class="section">
                        <h3>Offset-Based Pagination</h3>
                        <p>Uses page numbers or skip/limit parameters.</p>
                        
                        <div class="response-panel">
                            <pre>GET /api/items?page=1&per_page=10
GET /api/items?page=2&per_page=10
GET /api/items?offset=0&limit=10
GET /api/items?offset=10&limit=10</pre>
                        </div>
                        
                        <div class="info-box">
                            <h4>‚úì Advantages</h4>
                            <ul>
                                <li>Simple to implement and understand</li>
                                <li>Can jump to any page directly</li>
                                <li>Easy to display page numbers</li>
                            </ul>
                        </div>
                        
                        <div class="warning-box">
                            <h4>‚úó Disadvantages</h4>
                            <ul>
                                <li>Inconsistent results if data changes</li>
                                <li>May skip or duplicate items</li>
                                <li>Performance degrades on later pages</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="section">
                        <h3>Cursor-Based Pagination</h3>
                        <p>Uses opaque tokens to mark positions.</p>
                        
                        <div class="response-panel">
                            <pre>GET /api/items?cursor=*
‚Üí Response includes: next_cursor=abc123

GET /api/items?cursor=abc123
‚Üí Response includes: next_cursor=xyz789

GET /api/items?cursor=xyz789
‚Üí Response includes: next_cursor=null (end)</pre>
                        </div>
                        
                        <div class="info-box">
                            <h4>‚úì Advantages</h4>
                            <ul>
                                <li>Consistent results even with changes</li>
                                <li>No duplicates or skipped items</li>
                                <li>Constant performance</li>
                            </ul>
                        </div>
                        
                        <div class="warning-box">
                            <h4>‚úó Disadvantages</h4>
                            <ul>
                                <li>Cannot jump to arbitrary page</li>
                                <li>More complex implementation</li>
                                <li>Opaque cursor values</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>Pagination Simulator</h3>
                <div class="btn-group">
                    <button onclick="simulatePagination('offset')">Simulate Offset Pagination</button>
                    <button onclick="simulatePagination('cursor')">Simulate Cursor Pagination</button>
                </div>
                <div class="response-panel" id="paginationSimulator">
                    <pre>Click a button to see pagination in action</pre>
                </div>
            </div>
        </div>
        
        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <h2>Knowledge Check</h2>
            
            <div class="progress-bar">
                <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
            </div>
            
            <div id="quizContainer">
                <div class="section" id="quizQuestion">
                    <h3>Question <span id="questionNum">1</span> of 10</h3>
                    <p id="questionText" style="font-size: 1.2rem; margin: 1rem 0;"></p>
                    
                    <div id="quizOptions"></div>
                    
                    <div class="btn-group" style="margin-top: 1rem;">
                        <button id="submitAnswer" onclick="submitAnswer()">Submit Answer</button>
                        <button id="nextQuestion" onclick="nextQuestion()" style="display: none;">Next Question</button>
                    </div>
                    
                    <div id="feedback" class="info-box" style="display: none; margin-top: 1rem;"></div>
                </div>
            </div>
            
            <div id="quizResults" style="display: none;">
                <div class="score-display">
                    Your Score: <span id="finalScore">0</span>/10
                </div>
                <button onclick="restartQuiz()">Try Again</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>12UNIT: Web APIs and Data Acquisition ‚Ä¢ Computational Thinking for Researchers</p>
        <p>Dr Antonio Clim ‚Ä¢ Academy of Economic Studies, Bucharest</p>
    </footer>
    
    <script>
        // Tab switching
        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }
        
        // Method info display
        const methodInfo = {
            GET: {
                title: 'GET - Retrieve Resource',
                content: `<ul>
                    <li><strong>Purpose:</strong> Retrieve data from the server</li>
                    <li><strong>Safe:</strong> Yes - no side effects</li>
                    <li><strong>Idempotent:</strong> Yes - same result on repeat</li>
                    <li><strong>Body:</strong> Not allowed</li>
                </ul>
                <pre>GET /api/publications/123
Accept: application/json</pre>`
            },
            POST: {
                title: 'POST - Create Resource',
                content: `<ul>
                    <li><strong>Purpose:</strong> Create a new resource</li>
                    <li><strong>Safe:</strong> No - creates state</li>
                    <li><strong>Idempotent:</strong> No - each call may create new resource</li>
                    <li><strong>Body:</strong> Required - contains new resource data</li>
                </ul>
                <pre>POST /api/publications
Content-Type: application/json

{"title": "New Paper", "year": 2024}</pre>`
            },
            PUT: {
                title: 'PUT - Replace Resource',
                content: `<ul>
                    <li><strong>Purpose:</strong> Replace a resource entirely</li>
                    <li><strong>Safe:</strong> No - modifies state</li>
                    <li><strong>Idempotent:</strong> Yes - same final state</li>
                    <li><strong>Body:</strong> Required - complete new representation</li>
                </ul>
                <pre>PUT /api/publications/123
Content-Type: application/json

{"title": "Updated Paper", "year": 2024}</pre>`
            },
            DELETE: {
                title: 'DELETE - Remove Resource',
                content: `<ul>
                    <li><strong>Purpose:</strong> Remove a resource</li>
                    <li><strong>Safe:</strong> No - modifies state</li>
                    <li><strong>Idempotent:</strong> Yes - resource stays deleted</li>
                    <li><strong>Body:</strong> Optional</li>
                </ul>
                <pre>DELETE /api/publications/123</pre>`
            }
        };
        
        function showMethodInfo(method) {
            const info = methodInfo[method];
            document.getElementById('methodInfo').innerHTML = `
                <h4>${info.title}</h4>
                ${info.content}
            `;
        }
        
        // Request builder
        function updateRequestPreview() {
            const method = document.getElementById('reqMethod').value;
            const url = document.getElementById('reqUrl').value;
            let headers = {};
            try {
                headers = JSON.parse(document.getElementById('reqHeaders').value);
            } catch (e) {}
            const body = document.getElementById('reqBody').value;
            
            let preview = `${method} ${url} HTTP/1.1\n`;
            for (const [key, value] of Object.entries(headers)) {
                preview += `${key}: ${value}\n`;
            }
            if (method === 'POST' || method === 'PUT') {
                preview += `\n${body}`;
            }
            
            document.getElementById('requestPreview').textContent = preview;
        }
        
        async function sendRequest() {
            const method = document.getElementById('reqMethod').value;
            const url = document.getElementById('reqUrl').value;
            let headers = {};
            try {
                headers = JSON.parse(document.getElementById('reqHeaders').value);
            } catch (e) {}
            const body = document.getElementById('reqBody').value;
            
            const statusEl = document.getElementById('responseStatus');
            const timeEl = document.getElementById('responseTime');
            const bodyEl = document.getElementById('responseBody');
            
            statusEl.textContent = 'Loading...';
            statusEl.className = 'status-badge';
            timeEl.textContent = '';
            bodyEl.textContent = 'Sending request...';
            
            const startTime = performance.now();
            
            try {
                const options = {
                    method,
                    headers,
                    mode: 'cors'
                };
                
                if (method === 'POST' || method === 'PUT') {
                    options.body = body;
                }
                
                const response = await fetch(url, options);
                const endTime = performance.now();
                const duration = Math.round(endTime - startTime);
                
                const status = response.status;
                statusEl.textContent = `${status} ${response.statusText}`;
                
                if (status >= 200 && status < 300) {
                    statusEl.className = 'status-badge status-2xx';
                } else if (status >= 300 && status < 400) {
                    statusEl.className = 'status-badge status-3xx';
                } else if (status >= 400 && status < 500) {
                    statusEl.className = 'status-badge status-4xx';
                } else {
                    statusEl.className = 'status-badge status-5xx';
                }
                
                timeEl.textContent = `${duration}ms`;
                
                const data = await response.json();
                bodyEl.innerHTML = syntaxHighlight(JSON.stringify(data, null, 2));
            } catch (e) {
                statusEl.textContent = 'Error';
                statusEl.className = 'status-badge status-5xx';
                bodyEl.textContent = `Request failed: ${e.message}`;
            }
        }
        
        function syntaxHighlight(json) {
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    if (/:$/.test(match)) {
                        cls = 'json-key';
                    } else {
                        cls = 'json-string';
                    }
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-null';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }
        
        function loadExample(type) {
            document.getElementById('reqMethod').value = 'GET';
            document.getElementById('reqUrl').value = 'https://httpbin.org/get';
            document.getElementById('reqHeaders').value = JSON.stringify({
                "Accept": "application/json",
                "User-Agent": "APIExplorer/1.0"
            }, null, 2);
            updateRequestPreview();
        }
        
        // Status code simulator
        function simulateStatus(code) {
            const responses = {
                200: {
                    status: '200 OK',
                    body: {
                        success: true,
                        data: { id: 123, title: "Example Publication" }
                    }
                },
                201: {
                    status: '201 Created',
                    body: {
                        success: true,
                        data: { id: 456, title: "New Publication" },
                        location: "/api/publications/456"
                    }
                },
                400: {
                    status: '400 Bad Request',
                    body: {
                        error: "Bad Request",
                        message: "Missing required field: title",
                        code: "VALIDATION_ERROR"
                    }
                },
                404: {
                    status: '404 Not Found',
                    body: {
                        error: "Not Found",
                        message: "Publication with ID 999 not found",
                        code: "RESOURCE_NOT_FOUND"
                    }
                },
                429: {
                    status: '429 Too Many Requests',
                    headers: 'Retry-After: 60',
                    body: {
                        error: "Rate Limit Exceeded",
                        message: "You have exceeded 100 requests per minute",
                        retry_after: 60
                    }
                },
                500: {
                    status: '500 Internal Server Error',
                    body: {
                        error: "Internal Server Error",
                        message: "An unexpected error occurred",
                        request_id: "req_abc123"
                    }
                }
            };
            
            const resp = responses[code];
            let output = `HTTP/1.1 ${resp.status}\n`;
            output += `Content-Type: application/json\n`;
            if (resp.headers) output += `${resp.headers}\n`;
            output += `\n${JSON.stringify(resp.body, null, 2)}`;
            
            document.getElementById('statusSimulator').innerHTML = `<pre>${syntaxHighlight(output)}</pre>`;
        }
        
        // Pagination simulator
        function simulatePagination(type) {
            let output = '';
            
            if (type === 'offset') {
                output = `<span class="json-key">// Page 1</span>
GET /api/items?page=1&per_page=3

{
  "items": [
    {"id": 1, "name": "Item 1"},
    {"id": 2, "name": "Item 2"},
    {"id": 3, "name": "Item 3"}
  ],
  "meta": {
    "page": 1,
    "per_page": 3,
    "total": 8,
    "total_pages": 3
  }
}

<span class="json-key">// Page 2</span>
GET /api/items?page=2&per_page=3

{
  "items": [
    {"id": 4, "name": "Item 4"},
    {"id": 5, "name": "Item 5"},
    {"id": 6, "name": "Item 6"}
  ],
  "meta": {
    "page": 2,
    "per_page": 3,
    "total": 8,
    "total_pages": 3
  }
}`;
            } else {
                output = `<span class="json-key">// Initial request</span>
GET /api/items?cursor=*

{
  "items": [
    {"id": 1, "name": "Item 1"},
    {"id": 2, "name": "Item 2"},
    {"id": 3, "name": "Item 3"}
  ],
  "meta": {
    "next_cursor": "eyJpZCI6M30="
  }
}

<span class="json-key">// Follow cursor</span>
GET /api/items?cursor=eyJpZCI6M30=

{
  "items": [
    {"id": 4, "name": "Item 4"},
    {"id": 5, "name": "Item 5"},
    {"id": 6, "name": "Item 6"}
  ],
  "meta": {
    "next_cursor": "eyJpZCI6Nn0="
  }
}

<span class="json-key">// Last page (cursor is null)</span>
GET /api/items?cursor=eyJpZCI6Nn0=

{
  "items": [
    {"id": 7, "name": "Item 7"},
    {"id": 8, "name": "Item 8"}
  ],
  "meta": {
    "next_cursor": null
  }
}`;
            }
            
            document.getElementById('paginationSimulator').innerHTML = `<pre>${output}</pre>`;
        }
        
        // Quiz functionality
        const quizQuestions = [
            {
                question: "Which HTTP method is used to retrieve a resource?",
                options: ["POST", "GET", "PUT", "DELETE"],
                correct: 1,
                explanation: "GET is the standard method for retrieving resources. It is safe and idempotent."
            },
            {
                question: "What status code indicates a resource was successfully created?",
                options: ["200 OK", "201 Created", "204 No Content", "202 Accepted"],
                correct: 1,
                explanation: "201 Created is returned when a new resource has been successfully created, typically in response to a POST request."
            },
            {
                question: "Which status code indicates rate limiting?",
                options: ["400 Bad Request", "403 Forbidden", "429 Too Many Requests", "503 Service Unavailable"],
                correct: 2,
                explanation: "429 Too Many Requests indicates the user has sent too many requests in a given time period."
            },
            {
                question: "What does 'idempotent' mean for HTTP methods?",
                options: [
                    "The request is always successful",
                    "Multiple identical requests have the same effect as a single request",
                    "The request doesn't require authentication",
                    "The request is encrypted"
                ],
                correct: 1,
                explanation: "An idempotent operation produces the same result whether executed once or multiple times."
            },
            {
                question: "Which header is commonly used for Bearer token authentication?",
                options: ["X-API-Key", "Authorization", "Authentication", "Token"],
                correct: 1,
                explanation: "The Authorization header with 'Bearer <token>' is the standard way to send bearer tokens."
            },
            {
                question: "What is a disadvantage of offset-based pagination?",
                options: [
                    "Cannot jump to arbitrary pages",
                    "May skip or duplicate items if data changes",
                    "More complex to implement",
                    "Slower performance on first page"
                ],
                correct: 1,
                explanation: "Offset pagination can produce inconsistent results if data is added or removed between page requests."
            },
            {
                question: "Which HTTP method is NOT idempotent?",
                options: ["GET", "PUT", "POST", "DELETE"],
                correct: 2,
                explanation: "POST is not idempotent because each call may create a new resource, producing different results."
            },
            {
                question: "What should you do when receiving a 429 status code?",
                options: [
                    "Retry immediately",
                    "Check the Retry-After header and wait",
                    "Report an error to the user",
                    "Change your API key"
                ],
                correct: 1,
                explanation: "When rate limited, check the Retry-After header for how long to wait before retrying."
            },
            {
                question: "What is the purpose of the robots.txt file?",
                options: [
                    "To authenticate web scrapers",
                    "To specify which paths crawlers may access",
                    "To list all available API endpoints",
                    "To configure rate limits"
                ],
                correct: 1,
                explanation: "robots.txt specifies directives for web crawlers about which paths they are allowed or disallowed to access."
            },
            {
                question: "Which status code category indicates a server error?",
                options: ["2xx", "3xx", "4xx", "5xx"],
                correct: 3,
                explanation: "5xx status codes indicate server-side errors that the client cannot fix."
            }
        ];
        
        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        
        function loadQuestion() {
            const q = quizQuestions[currentQuestion];
            document.getElementById('questionNum').textContent = currentQuestion + 1;
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('quizProgress').style.width = `${(currentQuestion / quizQuestions.length) * 100}%`;
            
            let optionsHtml = '';
            q.options.forEach((opt, i) => {
                optionsHtml += `<label class="quiz-option" onclick="selectOption(${i})" id="option${i}">${opt}</label>`;
            });
            document.getElementById('quizOptions').innerHTML = optionsHtml;
            
            document.getElementById('submitAnswer').style.display = 'inline-block';
            document.getElementById('nextQuestion').style.display = 'none';
            document.getElementById('feedback').style.display = 'none';
            selectedOption = null;
        }
        
        function selectOption(i) {
            document.querySelectorAll('.quiz-option').forEach(o => o.classList.remove('selected'));
            document.getElementById(`option${i}`).classList.add('selected');
            selectedOption = i;
        }
        
        function submitAnswer() {
            if (selectedOption === null) return;
            
            const q = quizQuestions[currentQuestion];
            const feedback = document.getElementById('feedback');
            
            document.querySelectorAll('.quiz-option').forEach(o => o.classList.remove('selected'));
            
            if (selectedOption === q.correct) {
                document.getElementById(`option${selectedOption}`).classList.add('correct');
                feedback.innerHTML = `<h4>‚úì Correct!</h4><p>${q.explanation}</p>`;
                feedback.className = 'info-box';
                score++;
            } else {
                document.getElementById(`option${selectedOption}`).classList.add('incorrect');
                document.getElementById(`option${q.correct}`).classList.add('correct');
                feedback.innerHTML = `<h4>‚úó Incorrect</h4><p>${q.explanation}</p>`;
                feedback.className = 'warning-box';
            }
            
            feedback.style.display = 'block';
            document.getElementById('submitAnswer').style.display = 'none';
            document.getElementById('nextQuestion').style.display = 'inline-block';
            document.getElementById('nextQuestion').textContent = 
                currentQuestion < quizQuestions.length - 1 ? 'Next Question' : 'See Results';
        }
        
        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < quizQuestions.length) {
                loadQuestion();
            } else {
                document.getElementById('quizContainer').style.display = 'none';
                document.getElementById('quizResults').style.display = 'block';
                document.getElementById('finalScore').textContent = score;
                document.getElementById('quizProgress').style.width = '100%';
            }
        }
        
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('quizResults').style.display = 'none';
            loadQuestion();
        }
        
        // Initialize
        updateRequestPreview();
        loadQuestion();
    </script>
</body>
</html>
