@startuml flask_app_structure
!theme plain
skinparam backgroundColor #FEFEFE
skinparam componentStyle rectangle

title Flask REST API Architecture

package "Flask Application" {
    
    component [**app.py**\nApplication factory\nConfiguration] as App
    
    package "Routes" {
        component [**/api/health**\nHealth check] as Health
        component [**/api/datasets**\nCollection endpoints] as Datasets
        component [**/api/datasets/<id>**\nResource endpoints] as Dataset
    }
    
    package "Services" {
        component [**DataService**\nBusiness logic\nData operations] as Service
        component [**Validators**\nInput validation\nSchema checking] as Valid
    }
    
    package "Models" {
        component [**Dataset**\nDataclass/ORM\nSerialization] as Model
    }
    
    package "Error Handling" {
        component [**400 Handler**\nBad Request] as E400
        component [**404 Handler**\nNot Found] as E404
        component [**500 Handler**\nServer Error] as E500
    }
    
    database "Data Store" as DB
}

cloud "HTTP Client" as Client

Client --> App : HTTP Request
App --> Health
App --> Datasets
App --> Dataset

Datasets --> Valid : Validate input
Dataset --> Valid
Valid --> Service : Process request
Service --> Model : Data operations
Model --> DB : Persist/Retrieve

Service --> E400 : Validation errors
Service --> E404 : Not found
Service --> E500 : Server errors

note right of App
  **Request Flow**
  1. Client sends HTTP request
  2. Flask routes to endpoint
  3. Validate request data
  4. Execute business logic
  5. Return JSON response
end note

note bottom of DB
  **Storage Options**
  • In-memory (development)
  • SQLite (small apps)
  • PostgreSQL (production)
  • JSON files (simple cases)
end note

@enduml
