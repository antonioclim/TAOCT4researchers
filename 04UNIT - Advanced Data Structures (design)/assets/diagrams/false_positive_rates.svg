<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550" width="800" height="550">
  <title>Bloom Filter False Positive Rates</title>
  <desc>Visualisation of false positive probability curves for Bloom filters with varying parameters</desc>
  
  <defs>
    <style>
      .title { font: bold 18px 'Segoe UI', sans-serif; fill: #58a6ff; }
      .subtitle { font: 14px 'Segoe UI', sans-serif; fill: #8b949e; }
      .axis-label { font: 12px 'Segoe UI', sans-serif; fill: #c9d1d9; }
      .tick-label { font: 10px 'JetBrains Mono', monospace; fill: #8b949e; }
      .legend-text { font: 11px 'Segoe UI', sans-serif; fill: #c9d1d9; }
      .formula { font: 12px 'JetBrains Mono', monospace; fill: #c9d1d9; }
      .note { font: 10px 'Segoe UI', sans-serif; fill: #8b949e; }
      .grid { stroke: #21262d; stroke-width: 0.5; }
      .axis { stroke: #484f58; stroke-width: 1.5; }
    </style>
    
    <linearGradient id="curve1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f85149;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f85149;stop-opacity:0.5" />
    </linearGradient>
    <linearGradient id="curve2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#d29922;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d29922;stop-opacity:0.5" />
    </linearGradient>
    <linearGradient id="curve3" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3fb950;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3fb950;stop-opacity:0.5" />
    </linearGradient>
    <linearGradient id="curve4" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#58a6ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#58a6ff;stop-opacity:0.5" />
    </linearGradient>
  </defs>
  
  <rect width="100%" height="100%" fill="#0d1117"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">Bloom Filter False Positive Probability</text>
  <text x="400" y="50" text-anchor="middle" class="subtitle">P(FP) ≈ (1 - e^(-kn/m))^k for varying m/n ratios</text>
  
  <!-- Chart Area -->
  <g transform="translate(100, 80)">
    <!-- Grid -->
    <g class="grid">
      <!-- Horizontal grid lines -->
      <line x1="0" y1="0" x2="550" y2="0"/>
      <line x1="0" y1="60" x2="550" y2="60"/>
      <line x1="0" y1="120" x2="550" y2="120"/>
      <line x1="0" y1="180" x2="550" y2="180"/>
      <line x1="0" y1="240" x2="550" y2="240"/>
      <line x1="0" y1="300" x2="550" y2="300"/>
      
      <!-- Vertical grid lines -->
      <line x1="0" y1="0" x2="0" y2="300"/>
      <line x1="110" y1="0" x2="110" y2="300"/>
      <line x1="220" y1="0" x2="220" y2="300"/>
      <line x1="330" y1="0" x2="330" y2="300"/>
      <line x1="440" y1="0" x2="440" y2="300"/>
      <line x1="550" y1="0" x2="550" y2="300"/>
    </g>
    
    <!-- Axes -->
    <line x1="0" y1="300" x2="550" y2="300" class="axis"/>
    <line x1="0" y1="0" x2="0" y2="300" class="axis"/>
    
    <!-- Y-axis labels (False Positive Rate) -->
    <text x="-10" y="5" text-anchor="end" class="tick-label">1.0</text>
    <text x="-10" y="65" text-anchor="end" class="tick-label">0.8</text>
    <text x="-10" y="125" text-anchor="end" class="tick-label">0.6</text>
    <text x="-10" y="185" text-anchor="end" class="tick-label">0.4</text>
    <text x="-10" y="245" text-anchor="end" class="tick-label">0.2</text>
    <text x="-10" y="305" text-anchor="end" class="tick-label">0.0</text>
    
    <!-- X-axis labels (Number of hash functions k) -->
    <text x="0" y="320" text-anchor="middle" class="tick-label">0</text>
    <text x="110" y="320" text-anchor="middle" class="tick-label">2</text>
    <text x="220" y="320" text-anchor="middle" class="tick-label">4</text>
    <text x="330" y="320" text-anchor="middle" class="tick-label">6</text>
    <text x="440" y="320" text-anchor="middle" class="tick-label">8</text>
    <text x="550" y="320" text-anchor="middle" class="tick-label">10</text>
    
    <!-- Axis titles -->
    <text x="275" y="350" text-anchor="middle" class="axis-label">Number of Hash Functions (k)</text>
    <text x="-60" y="150" text-anchor="middle" class="axis-label" transform="rotate(-90, -60, 150)">False Positive Rate P(FP)</text>
    
    <!-- Curves for different m/n ratios -->
    <!-- m/n = 4 (red) - high FP rate -->
    <path d="M 0,60 Q 55,45 110,54 Q 165,90 220,135 Q 275,180 330,210 Q 385,240 440,255 Q 495,270 550,280" 
          fill="none" stroke="#f85149" stroke-width="2.5"/>
    
    <!-- m/n = 8 (orange) -->
    <path d="M 0,0 Q 55,30 110,90 Q 165,150 220,195 Q 275,225 330,255 Q 385,270 440,282 Q 495,288 550,294" 
          fill="none" stroke="#d29922" stroke-width="2.5"/>
    
    <!-- m/n = 12 (green) -->
    <path d="M 0,0 Q 55,90 110,180 Q 165,225 220,255 Q 275,270 330,280 Q 385,285 440,290 Q 495,293 550,296" 
          fill="none" stroke="#3fb950" stroke-width="2.5"/>
    
    <!-- m/n = 16 (blue) - low FP rate -->
    <path d="M 0,0 Q 55,135 110,225 Q 165,262 220,278 Q 275,285 330,290 Q 385,292 440,294 Q 495,296 550,297" 
          fill="none" stroke="#58a6ff" stroke-width="2.5"/>
    
    <!-- Optimal k markers -->
    <circle cx="165" cy="54" r="5" fill="#f85149" stroke="#ffffff" stroke-width="1"/>
    <circle cx="275" cy="210" r="5" fill="#d29922" stroke="#ffffff" stroke-width="1"/>
    <circle cx="385" cy="270" r="5" fill="#3fb950" stroke="#ffffff" stroke-width="1"/>
    <circle cx="495" cy="290" r="5" fill="#58a6ff" stroke="#ffffff" stroke-width="1"/>
    
    <!-- Annotations for optimal k -->
    <text x="165" y="40" text-anchor="middle" class="note" fill="#f85149">k*≈3</text>
    <text x="275" y="195" text-anchor="middle" class="note" fill="#d29922">k*≈5</text>
    <text x="385" y="255" text-anchor="middle" class="note" fill="#3fb950">k*≈8</text>
    <text x="495" y="275" text-anchor="middle" class="note" fill="#58a6ff">k*≈11</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(670, 100)">
    <rect x="0" y="0" width="110" height="130" fill="#161b22" stroke="#30363d" rx="5"/>
    <text x="55" y="20" text-anchor="middle" class="legend-text" style="font-weight: bold;">m/n Ratio</text>
    
    <line x1="10" y1="40" x2="30" y2="40" stroke="#f85149" stroke-width="2.5"/>
    <text x="40" y="45" class="legend-text">m/n = 4</text>
    
    <line x1="10" y1="60" x2="30" y2="60" stroke="#d29922" stroke-width="2.5"/>
    <text x="40" y="65" class="legend-text">m/n = 8</text>
    
    <line x1="10" y1="80" x2="30" y2="80" stroke="#3fb950" stroke-width="2.5"/>
    <text x="40" y="85" class="legend-text">m/n = 12</text>
    
    <line x1="10" y1="100" x2="30" y2="100" stroke="#58a6ff" stroke-width="2.5"/>
    <text x="40" y="105" class="legend-text">m/n = 16</text>
    
    <circle cx="20" cy="120" r="4" fill="#ffffff" stroke="#484f58"/>
    <text x="40" y="125" class="legend-text">Optimal k</text>
  </g>
  
  <!-- Formula Box -->
  <g transform="translate(100, 430)">
    <rect x="0" y="0" width="300" height="90" fill="#161b22" stroke="#30363d" rx="5"/>
    <text x="150" y="20" text-anchor="middle" class="legend-text" style="font-weight: bold;">Key Formulae</text>
    
    <text x="10" y="45" class="formula">P(FP) ≈ (1 - e^(-kn/m))^k</text>
    <text x="10" y="65" class="formula">k_opt = (m/n) · ln(2) ≈ 0.693(m/n)</text>
    <text x="10" y="85" class="formula">P(FP)_min ≈ 0.6185^(m/n)</text>
  </g>
  
  <!-- Design Guidelines Box -->
  <g transform="translate(430, 430)">
    <rect x="0" y="0" width="330" height="90" fill="#161b22" stroke="#30363d" rx="5"/>
    <text x="165" y="20" text-anchor="middle" class="legend-text" style="font-weight: bold;">Practical Guidelines</text>
    
    <text x="10" y="45" class="note">• For 1% FP rate: m/n ≈ 9.6, k ≈ 7</text>
    <text x="10" y="60" class="note">• For 0.1% FP rate: m/n ≈ 14.4, k ≈ 10</text>
    <text x="10" y="75" class="note">• Doubling m halves FP rate (approx.)</text>
    <text x="10" y="90" class="note">• Too many hash functions increases FP rate</text>
  </g>
  
  <!-- Copyright -->
  <text x="400" y="540" text-anchor="middle" class="note">© 2025 Antonio Clim. All rights reserved.</text>
</svg>
