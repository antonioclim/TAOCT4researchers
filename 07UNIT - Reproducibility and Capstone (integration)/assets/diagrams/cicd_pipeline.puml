@startuml cicd_pipeline
!theme plain
skinparam backgroundColor #0d1117
skinparam defaultFontColor #e6edf3
skinparam activityBackgroundColor #21262d
skinparam activityBorderColor #30363d
skinparam arrowColor #58a6ff

title GitHub Actions CI/CD Pipeline for Research Software

|Developer|
start
:Push commit to repository;

|GitHub Actions|
:Trigger workflow;

partition "Build Stage" #161b22 {
    :Checkout code;
    :Set up Python 3.12;
    :Install dependencies\nfrom pyproject.toml;
}

partition "Quality Stage" #161b22 {
    fork
        :Run ruff linter;
        note right: Code style\nand formatting
    fork again
        :Run mypy type checker;
        note right: Static type\nverification
    end fork
    
    if (Quality checks pass?) then (yes)
        :Proceed to testing;
    else (no)
        :Fail pipeline;
        stop
    endif
}

partition "Test Stage" #161b22 {
    :Run pytest with coverage;
    note right
        pytest --cov=src
        --cov-report=xml
        --cov-fail-under=80
    end note
    
    if (Tests pass AND coverage â‰¥80%?) then (yes)
        :Generate coverage report;
    else (no)
        :Fail pipeline;
        stop
    endif
}

partition "Documentation Stage" #161b22 {
    :Build documentation;
    note right: MkDocs or Sphinx
    :Generate API docs;
}

partition "Artifact Stage" #161b22 {
    :Build distribution package;
    :Archive test results;
    :Upload coverage to Codecov;
}

|Developer|
:Receive status notification;
:Review results if failed;

stop

@enduml
